<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзывы</title>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js"></script>
</head>
<body>
    <h2>Оставьте отзыв</h2>
    <form id="reviewForm">
        <input type="text" id="name" placeholder="Ваше имя" required><br>
        <textarea id="review" placeholder="Ваш отзыв" required></textarea><br>
        <button type="submit">Отправить</button>
    </form>

    <h3>Отзывы:</h3>
    <ul id="reviewsList"></ul>

    <script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js';
  import { getDatabase, ref, push } from 'https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js';

  const firebaseConfig = {
    apiKey: "AIzaSyBfpnnnlKR_qN0kPD6vvZSo40LX-4ernsg",  
    authDomain: "otzivu.firebaseapp.com",  
    databaseURL: "https://otzivu-default-rtdb.europe-west1.firebasedatabase.app/",  
    projectId: "otzivu",  
    storageBucket: "otzivu.appspot.com",  
    messagingSenderId: "865152542955",  
    appId: "1:865152542955:web:abcd1234xyz"
  };

  // Инициализация Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Отправка данных
  document.getElementById("reviewForm").addEventListener("submit", function(event) {
    event.preventDefault();
    const name = document.getElementById("name").value;
    const review = document.getElementById("review").value;

    if (name && review) {
      push(ref(db, 'reviews'), {
        name: name,
        review: review,
        timestamp: new Date().toISOString()
      });

      document.getElementById("reviewForm").reset();
    }
  });

  // Получение данных
  const reviewsRef = ref(db, 'reviews');
  reviewsRef.on('child_added', function(snapshot) {
    const data = snapshot.val();
    const li = document.createElement("li");
    li.textContent = `${data.name}: ${data.review}`;
    document.getElementById("reviewsList").appendChild(li);
  });
</script>

</body>
</html>
