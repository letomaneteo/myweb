<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обновление данных пользователя</title>
    <script>
        // Функция для получения данных пользователя от бота (запрос от бота)
        async function fetchUserData() {
            // Получаем данные от бота через запрос JSON
            const response = await fetch('https://yourbotapi.com/get_user_data');
            const data = await response.json();
            
            // Отображаем данные пользователя
            displayUserData(data);
        }

        // Функция для отображения данных пользователя на экране
        function displayUserData(data) {
            const userDataContainer = document.getElementById('userData');
            userDataContainer.innerHTML = `
                <p><strong>ID:</strong> ${data.id}</p>
                <p><strong>Имя:</strong> ${data.username}</p>
                <p><strong>Очки:</strong> ${data.points}</p>
            `;
            
            // Устанавливаем поле ввода очков
            document.getElementById('newPoints').value = data.points; 
        }

        // Функция для отправки обновленных данных очков на сервер
        async function updatePoints() {
            const userId = document.getElementById('userId').value; // Получаем ID пользователя
            const newPoints = parseInt(document.getElementById('newPoints').value, 10); // Получаем новые очки
            if (isNaN(newPoints)) {
                alert('Пожалуйста, введите корректное значение для очков.');
                return;
            }

            const requestData = {
                id: userId,
                points: newPoints
            };

            try {
                const response = await fetch('https://yourserver.com/send_data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                if (response.ok) {
                    alert('Очки обновлены успешно!');
                    fetchUserData(); // Перезагружаем данные после обновления
                } else {
                    alert('Ошибка при обновлении очков.');
                }
            } catch (error) {
                console.error('Ошибка выполнения запроса:', error);
                alert('Произошла ошибка при обновлении данных.');
            }
        }
    </script>
</head>
<body onload="fetchUserData()">
    <h1>Добро пожаловать в личный кабинет</h1>

    <div id="userData">
        <!-- Данные пользователя будут отображаться здесь -->
    </div>

    <h2>Изменить очки</h2>
    <label for="newPoints">Новые очки:</label>
    <input type="number" id="newPoints" placeholder="Введите новое значение очков">
    <br>
    <button onclick="updatePoints()">Обновить очки</button>
</body>
</html>
